{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/HP/Desktop/my_workspace/hackathon/NFT/Pixelate/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/HP/Desktop/my_workspace/hackathon/NFT/Pixelate/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/HP/Desktop/my_workspace/hackathon/NFT/Pixelate/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Identicon from'react-identicons';import{FaTimes}from'react-icons/fa';import{useGlobalState,setGlobalState,truncate,setAlert}from'../store';import{buyNFT}from'../Blockchain.Services';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ShowNFT=function ShowNFT(){var _useGlobalState=useGlobalState('showModal'),_useGlobalState2=_slicedToArray(_useGlobalState,1),showModal=_useGlobalState2[0];var _useGlobalState3=useGlobalState('connectedAccount'),_useGlobalState4=_slicedToArray(_useGlobalState3,1),connectedAccount=_useGlobalState4[0];var _useGlobalState5=useGlobalState('nft'),_useGlobalState6=_slicedToArray(_useGlobalState5,1),nft=_useGlobalState6[0];var onChangePrice=function onChangePrice(){setGlobalState('showModal','scale-0');setGlobalState('updateModal','scale-100');};var handleNFTPurchase=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setGlobalState('showModal','scale-0');setGlobalState('loading',{show:true,msg:'Initializing NFT transfer...'});_context.prev=2;_context.next=5;return buyNFT(nft);case 5:setAlert('Transfer completed...','green');window.location.reload();_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);console.log('Error transfering NFT: ',_context.t0);setAlert('Purchase failed...','red');case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return function handleNFTPurchase(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-0 left-0 w-screen h-screen flex items-center\\n          justify-center bg-black bg-opacity-50 transform\\n          transition-transform duration-300 \".concat(showModal),children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-[#151c25] shadow-xl shadow-[#e32970] rounded-xl w-11/12 md:w-2/5 h-7/12 p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row justify-between items-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-400\",children:\"Buy NFT\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return setGlobalState('showModal','scale-0');},className:\"border-0 bg-transparent focus:outline-none\",children:/*#__PURE__*/_jsx(FaTimes,{className:\"text-gray-400\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-row justify-center items-center rounded-xl mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"shrink-0 rounded-xl overflow-hidden h-40 w-40\",children:/*#__PURE__*/_jsx(\"img\",{className:\"h-full w-full object-cover cursor-pointer\",src:nft===null||nft===void 0?void 0:nft.metadataURI,alt:nft===null||nft===void 0?void 0:nft.title})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-start rounded-xl mt-5\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-white font-semibold\",children:nft===null||nft===void 0?void 0:nft.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-xs my-1\",children:nft===null||nft===void 0?void 0:nft.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mt-3 text-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-start items-center\",children:[/*#__PURE__*/_jsx(Identicon,{string:nft===null||nft===void 0?void 0:nft.owner,size:50,className:\"h-10 w-10 object-contain rounded-full mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-center items-start\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-white font-bold\",children:\"@owner\"}),/*#__PURE__*/_jsx(\"small\",{className:\"text-pink-800 font-semibold\",children:nft!==null&&nft!==void 0&&nft.owner?truncate(nft.owner,4,4,11):'...'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-xs\",children:\"Current Price\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-semibold\",children:[nft===null||nft===void 0?void 0:nft.cost,\" ETH\"]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center space-x-2\",children:connectedAccount==(nft===null||nft===void 0?void 0:nft.owner)?/*#__PURE__*/_jsx(\"button\",{className:\"flex flex-row justify-center items-center\\r w-full text-[#e32970] text-md border-[#e32970]\\r py-2 px-5 rounded-full bg-transparent \\r drop-shadow-xl border hover:bg-[#bd255f]\\r hover:bg-transparent hover:text-white\\r hover:border hover:border-[#bd255f]\\r focus:outline-none focus:ring mt-5\",onClick:onChangePrice,children:\"Change Price\"}):/*#__PURE__*/_jsx(\"button\",{className:\"flex flex-row justify-center items-center\\r w-full text-white text-md bg-[#e32970]\\r hover:bg-[#bd255f] py-2 px-5 rounded-full\\r drop-shadow-xl border border-transparent\\r hover:bg-transparent hover:text-[#e32970]\\r hover:border hover:border-[#bd255f]\\r focus:outline-none focus:ring mt-5\",onClick:handleNFTPurchase,children:\"Purchase Now\"})})]})})});};export default ShowNFT;","map":{"version":3,"names":["Identicon","FaTimes","useGlobalState","setGlobalState","truncate","setAlert","buyNFT","ShowNFT","showModal","connectedAccount","nft","onChangePrice","handleNFTPurchase","show","msg","window","location","reload","console","log","metadataURI","title","description","owner","cost"],"sources":["C:/Users/HP/Desktop/my_workspace/hackathon/NFT/Pixelate/src/components/ShowNFT.jsx"],"sourcesContent":["import Identicon from 'react-identicons'\r\nimport { FaTimes } from 'react-icons/fa'\r\nimport { useGlobalState, setGlobalState, truncate, setAlert } from '../store'\r\nimport { buyNFT } from '../Blockchain.Services'\r\n\r\nconst ShowNFT = () => {\r\n  const [showModal] = useGlobalState('showModal')\r\n  const [connectedAccount] = useGlobalState('connectedAccount')\r\n  const [nft] = useGlobalState('nft')\r\n\r\n  const onChangePrice = () => {\r\n    setGlobalState('showModal', 'scale-0')\r\n    setGlobalState('updateModal', 'scale-100')\r\n  }\r\n\r\n  const handleNFTPurchase = async () => {\r\n    setGlobalState('showModal', 'scale-0')\r\n    setGlobalState('loading', {\r\n      show: true,\r\n      msg: 'Initializing NFT transfer...',\r\n    })\r\n\r\n    try {\r\n      await buyNFT(nft)\r\n      setAlert('Transfer completed...', 'green')\r\n      window.location.reload()\r\n    } catch (error) {\r\n      console.log('Error transfering NFT: ', error)\r\n      setAlert('Purchase failed...', 'red')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`fixed top-0 left-0 w-screen h-screen flex items-center\r\n          justify-center bg-black bg-opacity-50 transform\r\n          transition-transform duration-300 ${showModal}`}\r\n    >\r\n      <div className=\"bg-[#151c25] shadow-xl shadow-[#e32970] rounded-xl w-11/12 md:w-2/5 h-7/12 p-6\">\r\n        <div className=\"flex flex-col\">\r\n          <div className=\"flex flex-row justify-between items-center\">\r\n            <p className=\"font-semibold text-gray-400\">Buy NFT</p>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setGlobalState('showModal', 'scale-0')}\r\n              className=\"border-0 bg-transparent focus:outline-none\"\r\n            >\r\n              <FaTimes className=\"text-gray-400\" />\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"flex flex-row justify-center items-center rounded-xl mt-5\">\r\n            <div className=\"shrink-0 rounded-xl overflow-hidden h-40 w-40\">\r\n              <img\r\n                className=\"h-full w-full object-cover cursor-pointer\"\r\n                src={nft?.metadataURI}\r\n                alt={nft?.title}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex flex-col justify-start rounded-xl mt-5\">\r\n            <h4 className=\"text-white font-semibold\">{nft?.title}</h4>\r\n            <p className=\"text-gray-400 text-xs my-1\">{nft?.description}</p>\r\n\r\n            <div className=\"flex justify-between items-center mt-3 text-white\">\r\n              <div className=\"flex justify-start items-center\">\r\n                <Identicon\r\n                  string={nft?.owner}\r\n                  size={50}\r\n                  className=\"h-10 w-10 object-contain rounded-full mr-3\"\r\n                />\r\n                <div className=\"flex flex-col justify-center items-start\">\r\n                  <small className=\"text-white font-bold\">@owner</small>\r\n                  <small className=\"text-pink-800 font-semibold\">\r\n                    {nft?.owner ? truncate(nft.owner, 4, 4, 11) : '...'}\r\n                  </small>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex flex-col\">\r\n                <small className=\"text-xs\">Current Price</small>\r\n                <p className=\"text-sm font-semibold\">{nft?.cost} ETH</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex justify-between items-center space-x-2\">\r\n            {connectedAccount == nft?.owner ? (\r\n              <button\r\n                className=\"flex flex-row justify-center items-center\r\n                w-full text-[#e32970] text-md border-[#e32970]\r\n                py-2 px-5 rounded-full bg-transparent \r\n                drop-shadow-xl border hover:bg-[#bd255f]\r\n                hover:bg-transparent hover:text-white\r\n                hover:border hover:border-[#bd255f]\r\n                focus:outline-none focus:ring mt-5\"\r\n                onClick={onChangePrice}\r\n              >\r\n                Change Price\r\n              </button>\r\n            ) : (\r\n              <button\r\n                className=\"flex flex-row justify-center items-center\r\n                w-full text-white text-md bg-[#e32970]\r\n                hover:bg-[#bd255f] py-2 px-5 rounded-full\r\n                drop-shadow-xl border border-transparent\r\n                hover:bg-transparent hover:text-[#e32970]\r\n                hover:border hover:border-[#bd255f]\r\n                focus:outline-none focus:ring mt-5\"\r\n                onClick={handleNFTPurchase}\r\n              >\r\n                Purchase Now\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ShowNFT\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}